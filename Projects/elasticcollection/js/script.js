var dataJSON = [

    {
        "title":"Ajrakh Blockprints",
        "Type":"Craft",
        "Creator":"Khatri Community",
        "Year":1590,
        "Relevance":"Craft Culture",
        "Intensity":1,
        "imgURL":"assets/ab.jpg",
        "readMore":"https://en.wikipedia.org/wiki/Ajrak"
    },

    {
        "title":"Folio from the Baburnama",
        "Type":"Manuscript",
        "Creator":"Unknown Artist",
        "Year":1590,
        "Relevance":"Aesthetic Heritage",
        "Intensity":3,
        "imgURL":"assets/ffb.jpg",
        "readMore":"https://www.luhringaugustine.com/exhibitions/court-epic-spirit-indian-art-15th-19th-century#tab:thumbnails"
    },

    {
        "title":"Rajput Miniature Painting",
        "Type":"Traditional Art",
        "Creator":"Unknown Artist",
        "Year":1840,
        "Relevance":"Aesthetic Heritage",
        "Intensity":3,
        "imgURL":"assets/rmp.jpg",
        "readMore":"https://www.luhringaugustine.com/exhibitions/court-epic-spirit-indian-art-15th-19th-century#tab:thumbnails"
        
    },

    {
        "title":"Chhatrapati Shivaji Terminus (Victoria Terminus)",
        "Type":"Architecture",
        "Creator":["Frederick William Stevens", " Axel Haig"],
        "Year":1888,
        "Relevance":"Colonial Imagery",
        "Intensity":2,
        "imgURL":"assets/vt.jpg",
        "readMore":"https://whc.unesco.org/en/list/945/"
    },

    {
        "title":"Bharat Mata",
        "Type":"Painting",
        "Creator":"Abanindranath Tagore",
        "Year":1905,
        "Relevance":"Spirit",
        "Intensity":3,
        "imgURL":"assets/bm.jpg",
        "readMore":"https://thecultural.me/abanindranath-tagores-bharat-mata-and-its-role-in-fostering-indian-identity-200413"
    },

    {
        "title":"The Dream",
        "Type":"Painting",
        "Creator":"Henri Rousseau",
        "Year":1910,
        "Relevance":"Primitivism",
        "Intensity":2,
        "imgURL":"assets/td.jpg",
        "readMore":"https://www.moma.org/collection/works/79277"
    },

     
    {
        "title":"D. B. House",
        "Type":"Architecture",
        "Creator":"Uknown Designer",
        "Year":1913,
        "Relevance":"Colonial Imagery",
        "Intensity":2,
        "imgURL":"assets/dbh.jpg",
        "readMore":"https://imagewrighter.com/db-house-the-former-tata-palace-mumbai/"
    },

    {
        "title":"Gandhiji: Linocut Poster",
        "Type":"Poster",
        "Creator":"Nandalal Bose",
        "Year":1930,
        "Relevance":"Visual Activism",
        "Intensity":4,
        "imgURL":"assets/glp.jpg",
        "readMore":"https://www.christies.com/en/lot/lot-5716143"
    },

    {
        "title":"Haripura Poster",
        "Type":"Poster",
        "Creator":"Nandalal Bose",
        "Year":1937,
        "Relevance":"Visual Activism",
        "Intensity":2,
        "imgURL":"assets/hp.jpg",
        "readMore":"https://artsandculture.google.com/story/rediscovering-haripura-panels-nandalal-bose-national-gallery-of-modern-art-ngma-new-delhi/AwXRNpSFHeWVJw?hl=en"
    },

    {
        "title":"Commemorative Front Page, The Hindu",
        "Type": "News Graphic",
        "Creator": "Unknown Designer",
        "Year":1940,
        "Relevance": "Civic Identity",
        "Intensity": 6,
        "imgURL":"assets/hfp.jpg",
        "readMore":"https://decolonisingthroughcriticallibrarianship.wordpress.com/2019/09/13/freedom-and-fragmentation-images-of-independence-decolonisation-and-partition-at-cambridge-university/"
    },

    {
        "title":"Illustrations in the original manuscript of the Constitution of India",
        "Type":"Illustration",
        "Creator":"Nandalal Bose",
        "Year":1950,
        "Relevance":"Civic Identity",
        "Intensity":6,
        "imgURL":"assets/coi.jpg",
        "readMore":"https://culturalsamvaad.com/constitution-of-india-22-paintings-ode-to-indian-culture-and-history/"
    },

    {
        "title":"Painting 4",
        "Type":"Painting",
        "Creator":"Vasudeo Gaitonde",
        "Year":1962,
        "Relevance":"Spirit",
        "Intensity":1,
        "imgURL":"assets/p4.jpg",
        "readMore":"https://www.moma.org/magazine/articles/609"
    },

    {
        "title":"The Palace of Assembly",
        "Type":"Architecture",
        "Creator":"Le Corbusier",
        "Year":1965,
        "Relevance":"Post-Independence Westernisation",
        "Intensity":4,
        "imgURL":"assets/tpa.jpg",
        "readMore":"https://www.architectural-review.com/buildings/the-assembly-chandigarh"
    },

    {
        "title":"The Amul Girl",
        "Type":"Brand Mascot",
        "Creator":"Eustace Fernandes",
        "Year":1966,
        "Relevance":"Indian Advertising",
        "Intensity":4,
        "imgURL":"assets/tag.jpg",
        "readMore":"https://musebycl.io/advertising/story-amul-girl-indias-ad-icon-who-was-ahead-her-time"
    },
  
    {
        "title":"Shikar India: Air India Poster",
        "Type":"Poster",
        "Creator":"K. K. Save",
        "Year":1968,
        "Relevance":"Indian Advertising",
        "Intensity":6,
        "imgURL":"assets/sip.jpg",
        "readMore":"https://posterhouse.org/exhibition/air-indias-maharaja-advertising-gone-rogue/"
    },

    {
        "title":"Raga Todi: Air India Post Card",
        "Type":"Post Card",
        "Creator":"Avinash Godbole",
        "Year":1975,
        "Relevance":"Interdisciplinary Contextualisation",
        "Intensity":5,
        "imgURL":"assets/aipc.jpg",
        "readMore":"https://posterhouse.org/exhibition/air-indias-maharaja-advertising-gone-rogue/"
    },

    {
        "title":"Authority and Identity in India",
        "Type":"Essay",
        "Creator":"T. G. Vaidyanathan",
        "Year":1989,
        "Relevance":"Indian Identity",
        "Intensity":5,
        "imgURL":"assets/aii.jpg",
        "readMore":"https://www.jstor.org/stable/20025268"
    },

    {
        "title":"When Was Modernism",
        "Type":"Book",
        "Creator":"Geeta Kapur",
        "Year":2000,
        "Relevance":"Indian Art History",
        "Intensity":4,
        "imgURL":"assets/wwm.jpg",
        "readMore":"https://books.google.com/books/about/When_was_Modernism.html?id=NxGTNwAACAAJ&source=kp_book_description"
    },

    {
        "title":"South Asian Technospaces",
        "Type":"Book",
        "Creator":["Radhika Gajjala", " Venkataramana Gajjala"],
        "Year":2008,
        "Relevance":"Internet and India",
        "Intensity":4,
        "imgURL":"assets/sat.jpg",
        "readMore":"https://books.google.com/books/about/South_Asian_Technospaces.html?id=cMZFoROURUQC"
    },

    {
        "title":"Handpainted Signage",
        "Type":"Signage",
        "Creator":"Unknown Artisan",
        "Year":2012,
        "Relevance":"Visual Vernacular",
        "Intensity":3,
        "imgURL":"assets/hs.jpg",
        "readMore":"https://www.designsquabble.com/post/painted-signs-of-india"
    },


    {
        "title":"Swadeshi Color",
        "Type":"Essay",
        "Creator":"Natasha Eaton",
        "Year":2013,
        "Relevance":"Indian Art History",
        "Intensity":3,
        "imgURL":"assets/sc.jpg",
        "readMore":"https://www.jstor.org/stable/43188857"
    },

    {
        "title":"Blockprinted Textiles of India: Imprints of Culture",
        "Type": "Book",
        "Creator": "Eiluned Edwards",
        "Year":2010,
        "Relevance": "Craft Culture",
        "Intensity": 3,
        "imgURL": "assets/bti.jpg",
        "readMore": "https://books.google.com/books/about/Block_Printed_Textiles_of_India.html?id=j7_cjgEACAAJ&source=kp_book_description"
    },

    {
        "title":"Truck Art",
        "Type":"Craft",
        "Creator":"Trucking Community",
        "Year":2021,
        "Relevance":"Visual Vernacular",
        "Intensity":1,
        "imgURL":"assets/ta.jpg",
        "readMore":"https://hyperallergic.com/649642/india-vibrant-idiosyncratic-truck-art/"
    },

    {
        "title":"Bandish Blues",
        "Type":"Song",
        "Creator":"The Darshan Doshi Trio",
        "Year":2021,
        "Relevance":"Interdisciplinary Contextualisation",
        "Intensity":4,
        "imgURL":"assets/bb.jpg",
        "readMore":"https://www.youtube.com/watch?v=hHReQQfIXkk"
    },

    {
        "title":"Metamorphosis",
        "Type":"Installation",
        "Creator": ["Sameer Kulavoor", " Sandeep Meher"],
        "Year":2022,
        "Relevance":"Visual Vernacular",
        "Intensity":3,
        "imgURL":"assets/met.jpg",
        "readMore":"https://www.outlookindia.com/art-entertainment/a-world-of-creative-depiction-at-mumbai-urban-art-festival-photos-261215"
    },
 
    {
        "title":"Mehram",
        "Type":"Song",
        "Creator":["Asfar Hussain", " Arooj Aftab"],
        "Year":2022,
        "Relevance":"Interdisciplinary Contextualisation",
        "Intensity":4,
        "imgURL":"assets/meh.jpg",
        "readMore":"https://www.youtube.com/watch?v=BUm_hFMlsgg"
    }

    ];    
var dataJSON = dataJSON.sort((a, b) => (a.Year > b.Year) ? 1 : -1);
let dataContainerA = document.querySelector("#data-container-A");
let dataContainerB = document.querySelector("#data-container-B");
let dataContainerC = document.querySelector("#data-container-C");
let dataContainerD = document.querySelector("#data-container-D");
let modalContainer = document.querySelector("#modal-container");




for (let x of dataJSON){

let dataHTML = `
                    <div class="data-bckg" style="background-image: url(${x.imgURL})"></div>
                `;
let modalHTML = `
                    <div class="modal">
                        <div class="data-img" style="background-image: url(${x.imgURL})">
                        </div>
                        <div class="data-info">
                            <div class="data-name">
                                <h2>${x.title}</h2>
                            </div>
                            <div class="data-other-info">
                                <div class="data-year">
                                    <p>${"Year: " + x.Year}</p>
                                </div>
                                <div class="data-type">
                                    <p>${"Ephemera Type: " + x.Type}</p>
                                </div>
                                <div class="data-designer">
                                    <p>${"Creator(s): " + x.Creator}</p>
                                </div>
                                <div class="data-relevance">
                                    <p>${"Relevance: " + x.Relevance}</p>
                                </div>
                                <div class="data-url">
                                    <a href="${x.readMore}">Learn More</a>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
let newData = document.createElement("div");
let newModal = document.createElement("div");
let i = dataJSON.indexOf(x);
newData.classList.add("data-" + [i]);
newData.classList.add("data");
newModal.classList.add("modal-" + [i]);
newModal.classList.add("modal-wrapper");
newData.innerHTML = dataHTML;
newModal.innerHTML = modalHTML;
newData.style.height = (x.Intensity * 40) + "px";
newData.style.width = (x.Intensity * 40) + "px";
newData.style.margin = ((x.Intensity * 2.5) + "px") ;
modalContainer.appendChild(newModal);


if (x.Year < 1800) {
    dataContainerA.appendChild(newData);
}

if (x.Year < 1900 && x.Year >= 1800) {
    dataContainerB.appendChild(newData);    
}

if (x.Year < 2000 && x.Year >= 1900) {
    dataContainerC.appendChild(newData);
}

else if (x.Year < 2100 && x.Year >= 2000) {
    dataContainerD.appendChild(newData);
}

}

for (let i = 0; i < dataJSON.length; i++){

    let thisData = document.querySelector(".data-" + [i]);
    let thisModal = document.querySelector(".modal-" + [i]);
    thisData.addEventListener("click", function(){
        thisModal.style.display = "block";
        window.onclick = function(){
            if (event.target == thisModal) {
                thisModal.style.display = "none";
            }
        }
    })
   

  }


  
let controlButton = document.getElementById("control-button");
let controlModal = document.getElementById("control-modal-wrapper");
controlButton.addEventListener("click", function(){
    controlModal.style.display = "block";
    window.onclick = function(){
        if (event.target == controlModal) {
            controlModal.style.display = "none";
        }
    }
})


var allData = document.querySelectorAll(".data");
var sizeToggle = document.getElementById("size-toggle");


sizeToggle.addEventListener('change', function(){


if  (this.checked) {

    
    for(let i = 0; i < dataJSON.length; i++){
        allData[i].style.width = "120px";
        allData[i].style.height = "120px";
    }
    console.log("all data resized to 120px");
}

 if (this.checked == false) {
    for(let i = 0; i < dataJSON.length; i++){
        allData[i].style.width = (dataJSON[i].Intensity * 40) + "px";
        allData[i].style.height = (dataJSON[i].Intensity * 40) + "px";
    }
         console.log("data sized by intensity");
   }
 })

 var minYear = document.getElementById("minyear-slider");
 var maxYear = document.getElementById("maxyear-slider");
 var yearArray = [];
 

for(let i = 0; i < dataJSON.length; i++){
    yearArray.push(dataJSON[i].Year);

 };

 var yearArray = yearArray.sort((a, b) => (a > b) ? 1 : -1);
 let m = yearArray.length - 1;
 
 minYear.min = yearArray[0];
 minYear.max = yearArray[m];
 minYear.value = yearArray[0];
 maxYear.min = yearArray[0];
 maxYear.max = yearArray[m];
 maxYear.value = yearArray[m];

 var usedata = [];
 
minYear.addEventListener("change", function(){
document.getElementById("minselection").innerHTML = minYear.value; 
console.log("now displaying entries dated from: " + minYear.value + " to: " + maxYear.value);
for(let i = 0; i < dataJSON.length; i++) {
         filteredData = document.querySelector(".data-"+ [i]);
if (dataJSON[i].Year >= minYear.value && dataJSON[i].Year <= maxYear.value) {
filteredData.style.display = "block";
}
else filteredData.style.display = "none";

}
})
 
maxYear.addEventListener("change", function(){
 
document.getElementById("maxselection").innerHTML = maxYear.value; 
console.log("now displaying entries dated from: " + minYear.value + " to: " + maxYear.value);
for(let i = 0; i < dataJSON.length; i++) {
        let filteredData = document.querySelector(".data-"+ [i]);
if (dataJSON[i].Year >= minYear.value && dataJSON[i].Year <= maxYear.value) {
filteredData.style.display = "block";
}
else filteredData.style.display = "none";
 }
})